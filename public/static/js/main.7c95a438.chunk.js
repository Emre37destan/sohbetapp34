(this["webpackJsonpchat-client"]=this["webpackJsonpchat-client"]||[]).push([[0],{135:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),c=n(28),r=n.n(c),i=n(136),o=n(4),l=n(9),u=(n(83),n(33)),d=n(16),m=n(6),b=Object(d.b)({name:"users",initialState:{currentUser:null,isAuthenticated:!1,error:null},reducers:{login:function(e,t){var n=t.payload;e.currentUser=n,e.isAuthenticated=!0},logout:function(e){e.currentUser=null,e.isAuthenticated=!1}}}),j=b.actions,h=j.login,f=j.logout,x=b.reducer,O=n(20),g=n.n(O),p=n(30),v=n(31),y=n.n(v),w=Object(d.b)({name:"users",initialState:{users:[],onlineUsersByUsername:[],loading:!1,error:null},reducers:{setOnlineUsersByUsername:function(e,t){var n=t.payload;e.onlineUsersByUsername=n},setUsers:function(e,t){var n=t.payload;e.users=n},addUser:function(e,t){var n=t.payload;e.users.push(n)},setLoading:function(e){e.loading=!0},setLoadingComplete:function(e){e.loading=!1}}}),N=w.actions,k=N.setUsers,S=N.addUser,U=N.setOnlineUsersByUsername,A=N.setLoading,C=N.setLoadingComplete,z=w.reducer;var M=Object(d.b)({name:"messages",initialState:{messages:[],loading:!1,error:null},reducers:{setMessages:function(e,t){var n=t.payload;e.messages=n},addMessage:function(e,t){var n=t.payload;e.messages.push(n)},sendMessage:function(e,t){t.payload},setLoading:function(e){e.loading=!0},setLoadingComplete:function(e){e.loading=!1}}}),B=M.actions,I=B.sendMessage,E=B.addMessage,L=B.setMessages,Y=B.setLoading,G=B.setLoadingComplete,K=M.reducer;var F=Object(m.c)({authState:x,usersState:z,messagesState:K});var J,Z=n(70),D=n(71),P=n(72),H=new(function(){function e(){Object(Z.a)(this,e),this.socket=void 0}return Object(D.a)(e,[{key:"connect",value:function(){this.socket=Object(P.io)("http://localhost:5000")}},{key:"disconnect",value:function(){this.socket&&(this.socket.disconnect(),this.socket=null)}},{key:"emit",value:function(e,t){this.socket&&this.socket.emit(e,t)}},{key:"on",value:function(e,t){this.socket&&this.socket.on(e,t)}}]),e}()),$=Object(d.a)({reducer:F,middleware:[(J=H,function(e){return function(t){return function(n){var a=e.dispatch,s=n.type,c=n.payload;switch(s){case"users/login":J.connect(),J.on("users online",(function(e){a(U(e))})),J.on("receive message",(function(e){a(E(e))})),J.on("new user added",(function(e){a(S(e))})),J.emit("new login",c);break;case"users/logout":J.disconnect();break;case"messages/sendMessage":return void J.emit("send message",c)}return t(n)}}})].concat(Object(u.a)(Object(d.c)()))}),_=n(17),T=n(3),q=n(34),Q=n(1),R=function(e){var t=e.component,n=Object(q.a)(e,["component"]),a=Object(o.c)((function(e){return e.authState})).isAuthenticated;return Object(Q.jsx)(i.b,Object(T.a)({render:function(e){return a?Object(Q.jsx)(t,Object(T.a)({},e)):Object(Q.jsx)(i.a,{to:"/"})}},n))},V=function(e){var t=e.component,n=Object(q.a)(e,["component"]),a=Object(o.c)((function(e){return e.authState})).isAuthenticated;return Object(Q.jsx)(i.b,Object(T.a)({render:function(e){return a?Object(Q.jsx)(i.a,{to:"/chat"}):Object(Q.jsx)(t,Object(T.a)({},e))}},n))},W=n(21),X=n.p+"static/media/doge.28763983.png",ee=function(e){var t=e.onChange,n=e.onBlur,a=e.error,s=e.value,c=e.label,r=e.placeholder,i=e.name;return Object(Q.jsxs)("div",{className:"mb-6",children:[Object(Q.jsx)("label",{htmlFor:i,className:"block mb-2 text-left text-gray-500 font-semibold",children:c}),Object(Q.jsx)("input",{type:"text",name:i,value:s,placeholder:r,onChange:t,onBlur:n,className:"w-full p-3 placeholder-gray-300 border border-gray-200 rounded-md shadow-md focus:outline-none focus:ring  focus:ring-opacity-50"+(a?" border-red-300 ring-red-300":"")}),!!a&&Object(Q.jsx)("div",{className:"my-2 text-left text-red-400 text-sm",children:a})]})},te=function(){var e=Object(a.useState)({email:"",username:""}),t=Object(_.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)({}),r=Object(_.a)(c,2),i=r[0],l=r[1],u=Object(o.b)(),d=function(e,t){switch(e){case"email":l(Object(T.a)(Object(T.a)({},i),{},Object(W.a)({},e,""===(n=t).trim()?"E-Posta - EMail Adresiniz Gereklidir!":/^[a-zA-Z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(n)?void 0:"E-Posta - EMail Adresiniz Ge\xe7ersizdir!")));break;case"username":l(Object(T.a)(Object(T.a)({},i),{},Object(W.a)({},e,function(e){return""===e.trim()?"Kullan\u0131c\u0131 Ad\u0131n\u0131z Gereklidir!":/[^A-Za-z0-9_-]/.test(e)?"Kullan\u0131c\u0131 Ad\u0131n\u0131z Yaln\u0131zca (Harf, Say\u0131, Tire & Alt \xc7izgi) I\xe7ermelidir!":void 0}(t))))}var n},m=function(e){var t=e.target,a=t.name,c=t.value;s(Object(T.a)(Object(T.a)({},n),{},Object(W.a)({},a,c))),i[a]&&d(a,c)},b=function(e){var t=e.target,n=t.name,a=t.value;d(n,a)};return Object(Q.jsx)("div",{className:"flex justify-center items-center h-screen bg-gray-100",children:Object(Q.jsxs)("div",{className:"container bg-white m-4 p-12 w-500 text-center rounded-md shadow-lg max-w-full mx-auto",children:[Object(Q.jsx)("img",{src:X,className:"block mx-auto mb-3 text-center w-24",alt:"Doge"}),Object(Q.jsx)("h1",{className:"text-3xl mb-8 font-bold text-gray-700",children:"Sohbete Giri\u015f Yap!"}),Object(Q.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u(h(n)),localStorage.setItem("user",JSON.stringify(n))},children:[Object(Q.jsx)(ee,{label:"E-Posta - EMail Adresiniz!",name:"email",value:n.email,placeholder:"kral@example.com",onChange:m,onBlur:b,error:i.email}),Object(Q.jsx)(ee,{label:"Kullan\u0131c\u0131 Ad\u0131n\u0131z!",name:"username",value:n.username,placeholder:"ali veli",onChange:m,onBlur:b,error:i.username}),Object(Q.jsx)("div",{className:"mb-3",children:Object(Q.jsx)("button",{className:"w-full px-3 py-4 text-white bg-blue font-medium rounded-md shadow-md hover:bg-blue-dark disabled:opacity-50 focus:outline-none",disabled:!n.email||!n.username||!(!i.email&&!i.username),children:"Giri\u015f Yap!"})}),Object(Q.jsx)("p",{className:"text-left text-gray-400 text-sm",children:"Bu Sistem Yaln\u0131zca Yeni Hesap Olu\u015fturma Ile Kullan\u0131l\u0131r!"})]})]})})},ne=n(32),ae=n.n(ne),se=function(e){var t=e.onClick;return Object(Q.jsxs)("div",{className:"bg-white fixed w-full top-0 left-0 z-10 flex items-center justify-between shadow-sm py-3 px-6 nav",children:[Object(Q.jsxs)("div",{className:"flex items-center",children:[Object(Q.jsx)("img",{src:X,alt:"Chat App",className:"h-12 w-12"}),Object(Q.jsx)("h1",{className:"ml-3 text-3xl font-semibold",children:"Sohbet App"})]}),Object(Q.jsx)("button",{type:"button",className:"px-6 py-3 text-white bg-blue font-medium rounded-md shadow-md hover:bg-blue-dark disabled:opacity-50 focus:outline-none",onClick:t,children:"\xc7\u0131k\u0131\u015f Yap"})]})},ce=function(e){var t=e.users,n=e.currentUser;return Object(Q.jsx)("div",{className:"flex-none min-w-300 bg-blue overflow-y-auto",children:Object(Q.jsxs)("div",{children:[Object(Q.jsx)("h2",{className:"m-6 text-white font-bold text-lg",children:"Kullan\u0131c\u0131lar"}),t.map((function(e,t){return Object(Q.jsx)("div",{className:"p-3 mx-6 my-2 text-white text-opacity-70 bg-blue-dark rounded-md",children:Object(Q.jsxs)("div",{className:"flex items-center",children:[Object(Q.jsx)("div",{className:"h-2 w-2 mr-2 rounded-full inline-block ".concat(e.online?"bg-green-400":"bg-blue-light")}),Object(Q.jsx)("span",{children:e.username}),e.username===n.username&&Object(Q.jsx)("span",{className:"ml-1 text-white text-opacity-30",children:"(sen)"})]})},"".concat(e.username,"-").concat(t))}))]})})},re=function(e){var t=e.messages,n=e.messageInput,a=e.handleSubmitForm,s=e.handleChangeInput;return Object(Q.jsx)("div",{className:"flex-1 w-full bg-gray-100",children:Object(Q.jsxs)("div",{className:"flex flex-col chatarea",children:[Object(Q.jsx)("div",{className:"flex-1 overflow-y-auto p-6 flex flex-col-reverse",children:t.map((function(e,t){return Object(Q.jsxs)("div",{className:"mb-3 p-3",children:[Object(Q.jsxs)("div",{className:"flex items-center mb-2",children:[Object(Q.jsx)("span",{className:"font-bold text-gray-700 text-lg mr-4",children:e.author})," ",Object(Q.jsx)("span",{className:"text-sm text-gray-400",children:ae()(e.date).format("h:mm A")})]}),Object(Q.jsx)("p",{className:"text-gray-800",children:e.content})]},"".concat(e.author,"-").concat(e.date,"-").concat(t))}))}),Object(Q.jsx)("div",{className:"flex-none pb-4 px-4",children:Object(Q.jsxs)("form",{onSubmit:a,children:[Object(Q.jsx)("input",{type:"text",name:"messageInput",value:n,onChange:s,className:"w-full p-3 placeholder-gray-300 border border-gray-200 rounded-md shadow-md focus:outline-none focus:border-blue-light",placeholder:"Ceval Yollan\u0131yor..."}),Object(Q.jsx)("button",{className:"hidden",children:"G\xf6nder"})]})})]})})},ie=function(){var e=Object(o.b)(),t=Object(a.useState)(""),n=Object(_.a)(t,2),s=n[0],c=n[1],r=Object(o.c)((function(e){return e.authState})).currentUser,i=Object(o.c)((function(e){return e.usersState})),l=i.users,d=i.loading,m=i.onlineUsersByUsername,b=Object(o.c)((function(e){return e.messagesState})),j=b.messages,h=b.loading;Object(a.useEffect)((function(){e(function(){var e=Object(p.a)(g.a.mark((function e(t,n){var a,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(A()),e.prev=1,e.next=4,y()("/api/users");case 4:a=e.sent,s=a.data,t(k(s.users)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:return e.prev=12,t(C()),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(t,n){return e.apply(this,arguments)}}()),e(function(){var e=Object(p.a)(g.a.mark((function e(t,n){var a,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Y()),e.prev=1,e.next=4,y()("/api/messages");case 4:a=e.sent,s=a.data,t(L(s.messages)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:return e.prev=12,t(G()),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(t,n){return e.apply(this,arguments)}}())}),[e]);var x=Object(a.useMemo)((function(){return l.length<1?[]:l.map((function(e){return Object(T.a)(Object(T.a)({},e),{},{online:m.some((function(t){return t===e.username}))})})).sort((function(e,t){return e.username.localeCompare(t.username)}))}),[l,m]),O=Object(a.useMemo)((function(){return j.length<1?[]:Object(u.a)(j).reverse()}),[j]);return h||d?Object(Q.jsx)("div",{className:"flex justify-center items-center h-screen bg-gray-100",children:"Y\xfckleniyor..."}):Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(se,{onClick:function(t){localStorage.removeItem("user"),e(f())}}),Object(Q.jsxs)("div",{className:"flex m-0 content",children:[Object(Q.jsx)(ce,{users:x,currentUser:r}),Object(Q.jsx)(re,{messages:O,messageInput:s,handleSubmitForm:function(t){if(t.preventDefault(),s&&""!==s.trim()){var n={content:s.trim(),date:ae()().format(),author:r.username};e(I(n))}c("")},handleChangeInput:function(e){c(e.target.value)}})]})]})},oe=function(){var e=Object(o.b)(),t=Object(a.useState)(!1),n=Object(_.a)(t,2),s=n[0],c=n[1];return Object(a.useEffect)((function(){var t=localStorage.getItem("user");t&&e(h(JSON.parse(t))),c(!0)}),[e,c]),s?Object(Q.jsxs)(i.d,{children:[Object(Q.jsx)(V,{component:te,exact:!0,path:"/"}),Object(Q.jsx)(R,{component:ie,exact:!0,path:"/chat"}),Object(Q.jsx)(i.a,{to:"/"})]}):Object(Q.jsx)("div",{className:"flex justify-center items-center h-screen bg-gray-100",children:"Loading..."})},le=Object(l.a)();r.a.render(Object(Q.jsx)(s.a.StrictMode,{children:Object(Q.jsx)(o.a,{store:$,children:Object(Q.jsx)(i.c,{history:le,children:Object(Q.jsx)(oe,{})})})}),document.getElementById("root"))},83:function(e,t,n){}},[[135,1,2]]]);
//# sourceMappingURL=main.7c95a438.chunk.js.map